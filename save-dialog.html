<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="bower_components/paper-button/paper-button.html">

<link rel="import" href="bower_components/iron-icons/iron-icons.html">

<link rel="import" href="file-view.html">

<dom-module id="save-dialog">
    <template>
        <style>
            :host {
                cursor: default;
                --violet: #9b59b6;
                --green: #1abb47;
                --blue: #1a33bc;
                --red: #bb241a;
            }

            #dialog {
                border-radius: 2px;
            }

            h2 {
                color: var(--red);
            }

            h2 iron-icon {
                margin-top: -5px;
            }

            .filepath {
                font-style: italic;
            }

            #files {
                display: flex;
                margin: 24px 0;
            }

            .file {
                flex-grow: 1;
                text-align: center;
            }

            .file file-view {
                margin-top: 8px;
            }

            .file.new span {
                color: var(--green);
            }

            .file.old span {
                color: var(--red);
            }

            #dialog > .buttons {
                padding: 8px 12px;
                flex-wrap: wrap;
                width: 516px;
            }

            paper-button {
                color: var(--blue);
                flex-grow: 1;
                width: 250px;
                box-sizing: border-box;
                margin: 0 4px 8px 4px;
                border: 1px solid currentColor;
            }

            #replace {
                color: var(--green);
            }

            #cancel {
                color: var(--red);
            }
        </style>

        <paper-dialog id="dialog" opened modal>
            <h2><iron-icon icon="warning"></iron-icon> Dateikonflikt</h2>
            <div>
                Es existiert bereits eine Datei an der Stelle <span class="filepath">[[path]]</span>.
                <div id="files">
                    <div class="file new">
                        <span>Neu</span>
                        <file-view name="[[name]]" icon="fileicon.svg"></file-view>
                    </div>
                    <div class="file old">
                        <span>Alt</span>
                        <file-view name="[[name]]" icon="fileicon_original.svg"></file-view>
                    </div>
                </div>
            </div>
            <div class="buttons">
                <paper-button id="rename">Anderen Namen wählen</paper-button>
                <paper-button id="both">Beide behalten</paper-button>
                <paper-button id="replace">Alte Datei überschreiben</paper-button>
                <paper-button id="cancel">Abbrechen</paper-button>
            </div>
        </paper-dialog>
    </template>

    <script>
        "use strict";

        Polymer({
            is: "save-dialog",

            properties: {
                path: {
                    type: String
                },

                name: {
                    computed: "_computeName(path)"
                }
            },

            _computeName: path => path.slice(path.lastIndexOf("/") + 1)
        });
    </script>
</dom-module>
